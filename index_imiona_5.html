<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Panstwa-Miasta Losowanie</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 20px;
    }
    button {
      font-size: 1.5em;
      padding: 10px 20px;
    }
    #letter {
      font-size: 3em;
      margin: 20px 0;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      font-size: 1.5em;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <h1>Losuj litere i kategorie</h1>
  <button id="drawButton">Losuj!</button>
  <div id="letter"></div>
  <ul id="categories"></ul>

  <script>
    const categories = [
      "Panstwo", "Miasto", "Imie", "Zwierze", "Roslina", "Zawod", "Kolor", "Film", "Ksiazka", "Rzeka", "Gory",
      "Marka samochodu", "Potrawa", "Sport", "Zespol muzyczny", "Program TV", "Czesc ciala", "Ubranie", "Rzecz",
      "Instrument muzyczny", "Piosenka", "Czasownik", "Przymiotnik", "Bohater filmowy", "Bohater ksiazkowy",
      "Postac historyczna", "Znak drogowy", "Typ pogody", "Narzedzie", "Napoj", "Kraj Europy", "Miasto w Polsce",
      "Znana osoba", "Typ budynku", "Nazwa sklepu", "Produkt spozywczy", "Srodek transportu", "Czesc domu",
      "Wyposazenie kuchni", "Aplikacja mobilna", "Strona internetowa", "Gra komputerowa", "Emocja", "Akcesorium",
      "Zwierze morskie", "Zwierze latajace", "Wyposazenie szkolne", "Zabawka", "Postac z bajki", "Swieto",
      "Pora roku", "Danie obiadowe", "Przekaska", "Serial", "Miasto za granica", "Nazwa firmy", "Czynnosc",
      "Czesc garderoby", "Marka odziezowa", "Warzywo", "Owoc", "Marka telefonu", "Typ kawy", "Pojecie matematyczne",
      "Material", "Rodzaj muzyki", "Zwierze domowe", "Pojazd wojskowy", "Akcesorium biurowe",
      "Czesc samochodu", "Typ sportowca", "Rodzaj broni", "Styl tanca", "Rodzaj chleba", "Typ pizzy", "Marka slodyczy"
    ];

    const exampleNames = {
      A: "Adam",
      B: "Bartek",
      C: "Celina",
      D: "Dominik",
      E: "Elzbieta",
      F: "Filip",
      G: "Grzegorz",
      H: "Helena",
      I: "Iwona",
      J: "Jan",
      K: "Karolina",
      L: "Lucyna",
      M: "Marek",
      N: "Natalia",
      O: "Ola",
      P: "Piotr",
      R: "Rafal",
      S: "Sandra",
      T: "Tomasz",
      U: "Ula",
      W: "Wojtek",
      Z: "Zofia"
    };

    function shuffleArray(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function speak(text, pauseSec = 1) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'pl-PL';
      speechSynthesis.speak(utterance);
      return new Promise((resolve) => {
        utterance.onend = () => setTimeout(resolve, pauseSec * 1000);
      });
    }

    async function drawAndAnnounce() {
      const alphabet = Object.keys(exampleNames);
      const randomLetter = alphabet[Math.floor(Math.random() * alphabet.length)];
      const nameExample = exampleNames[randomLetter];

      const shuffledCategories = shuffleArray(categories);
      const selectedCategories = shuffledCategories.slice(0, 5);

      document.getElementById("letter").textContent = randomLetter;
      const categoriesList = document.getElementById("categories");
      categoriesList.innerHTML = "";
      selectedCategories.forEach((cat) => {
        const li = document.createElement("li");
        li.textContent = cat;
        categoriesList.appendChild(li);
      });

      await speak("Litera", 1);
      await speak(randomLetter, 1);
      await speak("jak " + nameExample, 1);
      await speak("Kategorie", 1);
      for (const cat of selectedCategories) {
        await speak(cat, 1);
      }
    }

    document.getElementById("drawButton").addEventListener("click", drawAndAnnounce);
  </script>
</body>
</html>
